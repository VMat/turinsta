<!--
  Generated template for the PublicationWritingPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-item no-lines style="text-align: center">
      <button item-start ion-button clear (click)="dismissPublication()">
        <ion-icon name="close"></ion-icon>
      </button>
      <ion-title *ngIf="!publication._id">Nueva publicación</ion-title>
      <ion-title *ngIf="publication._id">Ver publicación</ion-title>
      <div *ngIf="checkEditPermission() && !editionMode" item-end>
        <button ion-button clear (click)="toogleEditMode(true)">
          <ion-icon name="create" isActive="{{editionMode}}" color="primary"></ion-icon>
        </button>
        <button ion-button clear (click)="confirmDelete()">
          <ion-icon name="trash" color="danger"></ion-icon>
        </button>
      </div>
      <div *ngIf="checkEditPermission() && editionMode" item-end>
        <button ion-button clear (click)="toogleEditMode(false)">
          <ion-icon name="undo" isActive="{{editionMode}}"></ion-icon>
        </button>
        <button ion-button clear (click)="confirmSave()">
          <ion-icon name="checkmark" color="success"></ion-icon>
        </button>
      </div>
    </ion-item>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <publication-header [user]=user [publication]=publication></publication-header>
  <ion-slides>
    <ion-slide style="align-items: start" *ngFor="let image of publication.images">
      <publication-image [id]=image._id [url]=image.url></publication-image>
    </ion-slide>
  </ion-slides>
  <p *ngIf="publication.description" item-start class="publication-description"><b>{{user.username}}</b>&nbsp;{{publication.description}}</p>
</ion-content>
